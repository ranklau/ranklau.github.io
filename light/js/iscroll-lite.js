!function(){var o=Math,t=function(o){return o>>0},e=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",n=(/android/gi.test(navigator.appVersion),/iphone|ipad/gi.test(navigator.appVersion)),i=/playbook/gi.test(navigator.appVersion),r=/hp-tablet/gi.test(navigator.appVersion),s="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,l="ontouchstart"in window&&!r,a=e+"Transform"in document.documentElement.style,c=n||i,p=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){return setTimeout(o,17)}}(),u=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),m="onorientationchange"in window?"orientationchange":"resize",d=l?"touchstart":"mousedown",f=l?"touchmove":"mousemove",h=l?"touchend":"mouseup",b=l?"touchcancel":"mouseup",w="translate"+(s?"3d(":"("),S=s?",0)":")",x=function(o,t){var n,i=this,r=document;i.wrapper="object"==typeof o?o:r.getElementById(o),i.wrapper.style.overflow="hidden",i.scroller=i.wrapper.children[0],i.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(o){o.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(n in t)i.options[n]=t[n];i.x=i.options.x,i.y=i.options.y,i.options.useTransform=a?i.options.useTransform:!1,i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar,i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar,i.options.useTransition=c&&i.options.useTransition,i.scroller.style[e+"TransitionProperty"]=i.options.useTransform?"-"+e.toLowerCase()+"-transform":"top left",i.scroller.style[e+"TransitionDuration"]="0",i.scroller.style[e+"TransformOrigin"]="0 0",i.options.useTransition&&(i.scroller.style[e+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),i.options.useTransform?i.scroller.style[e+"Transform"]=w+i.x+"px,"+i.y+"px"+S:i.scroller.style.cssText+=";position:absolute;top:"+i.y+"px;left:"+i.x+"px",i.refresh(),i._bind(m,window),i._bind(d),l||i._bind("mouseout",i.wrapper)};x.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(o){var t=this;switch(o.type){case d:if(!l&&0!==o.button)return;t._start(o);break;case f:t._move(o);break;case h:case b:t._end(o);break;case m:t._resize();break;case"mouseout":t._mouseout(o);break;case"webkitTransitionEnd":t._transitionEnd(o)}},_resize:function(){this.refresh()},_pos:function(o,n){o=this.hScroll?o:0,n=this.vScroll?n:0,this.options.useTransform?this.scroller.style[e+"Transform"]=w+o+"px,"+n+"px"+S+" scale("+this.scale+")":(o=t(o),n=t(n),this.scroller.style.left=o+"px",this.scroller.style.top=n+"px"),this.x=o,this.y=n},_start:function(o){var t,n,i,r=this,s=l?o.touches[0]:o;r.enabled&&(r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,o),r.options.useTransition&&r._transitionTime(0),r.moved=!1,r.animating=!1,r.zoomed=!1,r.distX=0,r.distY=0,r.absDistX=0,r.absDistY=0,r.dirX=0,r.dirY=0,r.options.momentum&&(r.options.useTransform?(t=getComputedStyle(r.scroller,null)[e+"Transform"].replace(/[^0-9-.,]/g,"").split(","),n=1*t[4],i=1*t[5]):(n=1*getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,""),i=1*getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")),(n!=r.x||i!=r.y)&&(r.options.useTransition?r._unbind("webkitTransitionEnd"):u(r.aniTime),r.steps=[],r._pos(n,i))),r.startX=r.x,r.startY=r.y,r.pointX=s.pageX,r.pointY=s.pageY,r.startTime=o.timeStamp||Date.now(),r.options.onScrollStart&&r.options.onScrollStart.call(r,o),r._bind(f),r._bind(h),r._bind(b))},_move:function(t){var e=this,n=l?t.touches[0]:t,i=n.pageX-e.pointX,r=n.pageY-e.pointY,s=e.x+i,a=e.y+r,c=t.timeStamp||Date.now();e.options.onBeforeScrollMove&&e.options.onBeforeScrollMove.call(e,t),e.pointX=n.pageX,e.pointY=n.pageY,(s>0||s<e.maxScrollX)&&(s=e.options.bounce?e.x+i/2:s>=0||e.maxScrollX>=0?0:e.maxScrollX),(a>0||a<e.maxScrollY)&&(a=e.options.bounce?e.y+r/2:a>=0||e.maxScrollY>=0?0:e.maxScrollY),e.distX+=i,e.distY+=r,e.absDistX=o.abs(e.distX),e.absDistY=o.abs(e.distY),e.absDistX<6&&e.absDistY<6||(e.options.lockDirection&&(e.absDistX>e.absDistY+5?(a=e.y,r=0):e.absDistY>e.absDistX+5&&(s=e.x,i=0)),e.moved=!0,e._pos(s,a),e.dirX=i>0?-1:0>i?1:0,e.dirY=r>0?-1:0>r?1:0,c-e.startTime>300&&(e.startTime=c,e.startX=e.x,e.startY=e.y),e.options.onScrollMove&&e.options.onScrollMove.call(e,t))},_end:function(e){if(!l||0==e.touches.length){var n,i,r,s=this,a=l?e.changedTouches[0]:e,c={dist:0,time:0},p={dist:0,time:0},u=(e.timeStamp||Date.now())-s.startTime,m=s.x,d=s.y;if(s._unbind(f),s._unbind(h),s._unbind(b),s.options.onBeforeScrollEnd&&s.options.onBeforeScrollEnd.call(s,e),!s.moved){if(l){for(n=a.target;1!=n.nodeType;)n=n.parentNode;"SELECT"!=n.tagName&&"INPUT"!=n.tagName&&"TEXTAREA"!=n.tagName&&(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,a.screenX,a.screenY,a.clientX,a.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._fake=!0,n.dispatchEvent(i))}return s._resetPos(200),s.options.onTouchEnd&&s.options.onTouchEnd.call(s,e),void 0}if(300>u&&s.options.momentum&&(c=m?s._momentum(m-s.startX,u,-s.x,s.scrollerW-s.wrapperW+s.x,s.options.bounce?s.wrapperW:0):c,p=d?s._momentum(d-s.startY,u,-s.y,s.maxScrollY<0?s.scrollerH-s.wrapperH+s.y:0,s.options.bounce?s.wrapperH:0):p,m=s.x+c.dist,d=s.y+p.dist,(s.x>0&&m>0||s.x<s.maxScrollX&&m<s.maxScrollX)&&(c={dist:0,time:0}),(s.y>0&&d>0||s.y<s.maxScrollY&&d<s.maxScrollY)&&(p={dist:0,time:0})),c.dist||p.dist)return r=o.max(o.max(c.time,p.time),10),s.scrollTo(t(m),t(d),r),s.options.onTouchEnd&&s.options.onTouchEnd.call(s,e),void 0;s._resetPos(200),s.options.onTouchEnd&&s.options.onTouchEnd.call(s,e)}},_resetPos:function(o){var t=this,e=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,n=t.y>=0||t.maxScrollY>0?0:t.y<t.maxScrollY?t.maxScrollY:t.y;return e==t.x&&n==t.y?(t.moved&&(t.options.onScrollEnd&&t.options.onScrollEnd.call(t),t.moved=!1),void 0):(t.scrollTo(e,n,o||0),void 0)},_mouseout:function(o){var t=o.relatedTarget;if(!t)return this._end(o),void 0;for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(o)},_transitionEnd:function(o){var t=this;o.target==t.scroller&&(t._unbind("webkitTransitionEnd"),t._startAni())},_startAni:function(){var t,e,n,i=this,r=i.x,s=i.y,l=Date.now();if(!i.animating){if(!i.steps.length)return i._resetPos(400),void 0;if(t=i.steps.shift(),t.x==r&&t.y==s&&(t.time=0),i.animating=!0,i.moved=!0,i.options.useTransition)return i._transitionTime(t.time),i._pos(t.x,t.y),i.animating=!1,t.time?i._bind("webkitTransitionEnd"):i._resetPos(0),void 0;n=function(){var a,c,u=Date.now();return u>=l+t.time?(i._pos(t.x,t.y),i.animating=!1,i.options.onAnimationEnd&&i.options.onAnimationEnd.call(i),i._startAni(),void 0):(u=(u-l)/t.time-1,e=o.sqrt(1-u*u),a=(t.x-r)*e+r,c=(t.y-s)*e+s,i._pos(a,c),i.animating&&(i.aniTime=p(n)),void 0)},n()}},_transitionTime:function(o){this.scroller.style[e+"TransitionDuration"]=o+"ms"},_momentum:function(e,n,i,r,s){var l=6e-4,a=o.abs(e)/n,c=a*a/(2*l),p=0,u=0;return e>0&&c>i?(u=s/(6/(c/a*l)),i+=u,a=a*i/c,c=i):0>e&&c>r&&(u=s/(6/(c/a*l)),r+=u,a=a*r/c,c=r),c*=0>e?-1:1,p=a/l,{dist:c,time:t(p)}},_offset:function(o){for(var t=-o.offsetLeft,e=-o.offsetTop;o=o.offsetParent;)t-=o.offsetLeft,e-=o.offsetTop;return{left:t,top:e}},_bind:function(o,t,e){(t||this.scroller).addEventListener(o,this,!!e)},_unbind:function(o,t,e){(t||this.scroller).removeEventListener(o,this,!!e)},destroy:function(){var o=this;o.scroller.style[e+"Transform"]="",o._unbind(m,window),o._unbind(d),o._unbind(f),o._unbind(h),o._unbind(b),o._unbind("mouseout",o.wrapper),o.options.useTransition&&o._unbind("webkitTransitionEnd"),o.options.onDestroy&&o.options.onDestroy.call(o)},refresh:function(){var o,t=this;t.wrapperW=t.wrapper.clientWidth,t.wrapperH=t.wrapper.clientHeight,t.scrollerW=t.scroller.offsetWidth,t.scrollerH=t.scroller.offsetHeight,t.maxScrollX=t.wrapperW-t.scrollerW,t.maxScrollY=t.wrapperH-t.scrollerH,t.dirX=0,t.dirY=0,t.hScroll=t.options.hScroll&&t.maxScrollX<0,t.vScroll=t.options.vScroll&&(!t.options.bounceLock&&!t.hScroll||t.scrollerH>t.wrapperH),o=t._offset(t.wrapper),t.wrapperOffsetLeft=-o.left,t.wrapperOffsetTop=-o.top,t.scroller.style[e+"TransitionDuration"]="0",t._resetPos(200)},scrollTo:function(o,t,e,n){var i,r,s=this,l=o;for(s.stop(),l.length||(l=[{x:o,y:t,time:e,relative:n}]),i=0,r=l.length;r>i;i++)l[i].relative&&(l[i].x=s.x-l[i].x,l[i].y=s.y-l[i].y),s.steps.push({x:l[i].x,y:l[i].y,time:l[i].time||0});s._startAni()},scrollToElement:function(t,e){var n,i=this;t=t.nodeType?t:i.scroller.querySelector(t),t&&(n=i._offset(t),n.left+=i.wrapperOffsetLeft,n.top+=i.wrapperOffsetTop,n.left=n.left>0?0:n.left<i.maxScrollX?i.maxScrollX:n.left,n.top=n.top>0?0:n.top<i.maxScrollY?i.maxScrollY:n.top,e=void 0===e?o.max(2*o.abs(n.left),2*o.abs(n.top)):e,i.scrollTo(n.left,n.top,e))},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(f),this._unbind(h),this._unbind(b)},enable:function(){this.enabled=!0},stop:function(){u(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1}},"undefined"!=typeof exports?exports.iScroll=x:window.iScroll=x}();